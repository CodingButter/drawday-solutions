import{c as u,j as r,R as f,r as g}from"./assets/app-CLZWhMdQ.js";const a="http://localhost:3000";console.log("DrawDay Options URL:",a);function m(){const n=g.useRef(null);return g.useEffect(()=>{const i=async()=>{try{const e=await chrome.runtime.sendMessage({action:"openSidePanel"});e!=null&&e.success||console.error("Failed to open side panel:",e==null?void 0:e.error)}catch(e){console.error("Failed to open side panel:",e)}},s=async e=>{try{console.log("[Extension] Triggering settings update in side panel",e),await chrome.runtime.sendMessage({action:"triggerSettingsUpdate",data:e})}catch(t){console.error("Failed to trigger settings update:",t)}},o=()=>{var e;if(console.log("Iframe loaded, attempting to inject functions"),(e=n.current)!=null&&e.contentWindow)try{const t=n.current.contentWindow;t.openSidepanel=i,t.triggerSettingsUpdate=s,console.log("Successfully injected openSidepanel and triggerSettingsUpdate functions")}catch(t){console.error("Failed to inject functions, will use postMessage fallback:",t)}};n.current&&(n.current.addEventListener("load",o),o());const c=async e=>{var t,l,d;e.origin===a&&(((t=e.data)==null?void 0:t.action)==="openSidePanel"?await i():((l=e.data)==null?void 0:l.action)==="triggerSettingsUpdate"&&await s((d=e.data)==null?void 0:d.data))};return window.addEventListener("message",c),()=>{window.removeEventListener("message",c),n.current&&n.current.removeEventListener("load",o)}},[]),r.jsx("div",{className:"w-full h-screen bg-background",children:r.jsx("iframe",{ref:n,src:`${a}/live-spinner/options`,className:"w-full h-full border-0",allow:"clipboard-write; clipboard-read",title:"DrawDay Spinner Options",style:{border:"none"}})})}const p=document.getElementById("root");p&&u.createRoot(p).render(r.jsx(f.StrictMode,{children:r.jsx(m,{})}));
